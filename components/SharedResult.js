'use client';

import React, { useEffect, useState } from 'react';
import { fetchUser } from '@/lib/fetchUser';
import { formatDate } from '@/lib/formatDate';
import { getRankCategory } from '@/lib/getRankCategory'
import { BackgroundBeams } from "@/components/ui/background-beams";
import Link from 'next/link';
import Image from 'next/image';

export default function SharedResult({ username }) {

	const [isLoading, setIsLoading] = useState(true);
	const [userData, setUserData] = useState(null);
	const [rankCategory, setRankCategory] = useState('unranked');

	useEffect(() => {
		const getUser = async () => {
			try {
				const data = await fetchUser('username', username);
				setUserData(data);
				console.log(data);
				if (data?.bestCategory?.rank != null) {
					const category = getRankCategory(data.bestCategory.rank);
					setRankCategory(category);
				}
			} catch (err) {
				console.error(err);
			} finally {
				setIsLoading(false)
			}
		};

		if (username) {
			getUser();
		}
	}, [username]);

	return (
		<div className='bg-[#101010] w-full h-full'>
			{!isLoading && userData ? (
				<div className='bg-[#101010] w-full max-w-5xl flex items-center justify-center mx-auto'>
					<div className="bento-container">
						<div className="bento-grid">
							<div className='bento user-info col-span-2 row-span-1'>
								<h1>I'm a T'Rex</h1>
								<p>{userData.user.bio || ''} Lorem ipsum dolor sit amet consectetur adipisicing elit. Asperiores distinctio similique perspiciatis atque nihil, magni consequuntur eveniet, officia doloribus, obcaecati facilis enim numquam commodi aliquam? Tempore suscipit assumenda optio aut.</p>
								<div className="socials">
									{userData.user.github && userData.user.github !== "" && (
										<a href={userData.user.github} target="_blank" rel="noopener noreferrer">
											Github
											<span className="w-4 h-4 flex items-center justify-center">
												<svg
													xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
													<path d="M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"></path>
													<path d="M9 18c-4.51 2-5-2-7-2"></path>
												</svg>
											</span>
										</a>
									)}
									{userData.user.linkedin && userData.user.linkedin !== "" && (
										<a href={userData.user.linkedin} target="_blank" rel="noopener noreferrer">
											LinkedIn
											<span className="w-4 h-4 flex items-center justify-center">
												<svg
													xmlns="http://www.w3.org/2000/svg"
													viewBox="0 0 24 24"
													fill="currentColor"
													className="w-full h-full"
												>
													<path d="M4.98 3.5C4.98 4.88 3.88 6 2.5 6S0 4.88 0 3.5 1.12 1 2.5 1 4.98 2.12 4.98 3.5zM.5 7h4V21h-4V7zm7.5 0h3.5v1.95h.05c.49-.9 1.69-1.85 3.45-1.85 3.7 0 4.5 2.45 4.5 5.65V21h-4v-6.5c0-1.55-.03-3.55-2.15-3.55-2.15 0-2.5 1.68-2.5 3.42V21h-4V7z" />
												</svg>
											</span>
										</a>
									)}
									{userData.user.twitter && userData.user.twitter !== "" && (
										<a href={userData.user.twitter} target="_blank" rel="noopener noreferrer">
											<span className="w-6 h-6 flex items-center justify-center">
												<svg viewBox="0 0 24 24" fill="none"
													xmlns="http://www.w3.org/2000/svg">
													<path d="M2 3H8.32813L12.6981 8.75109L17.7506 3H20.8181L14.1187 10.6248L22 21H15.8281L10.9944 14.7082L5.46312 20.9994H2.39562L9.56125 12.8444L2 3ZM5.58125 4.7318L16.675 19.1717H18.375L7.40437 4.7318H5.58125Z" fill="currentColor" />
												</svg>
											</span>
										</a>
									)}
								</div>
							</div>
							<div className='bento user-image col-span-1 row-span-1'>
								<Image
									src={userData.user.image}
									width={500}
									height={500}
									alt="Avtar"
								/>
								<div className="gradient-overlay" />
								<div className='absolute flex flex-col gap-2 bottom-4 p-4 z-2'>
									<p className='text-4xl'>I'm {userData.user.name.split(' ')[0]}</p>
									<p className='text-base text-gray-200 line-clamp-2'>{userData.user.bio || ''} Lorem, ipsum dolor sit amet consectetur adipisicing elit. Deleniti rem voluptates architecto, accusamus consequatur ipsam corporis et odio cupiditate quasi, consectetur eius nulla sequi, esse accusantium facilis suscipit quia. A?</p>
								</div>
							</div>
							{userData.ranks !== null && (
								<div className="bento rank-info col-span-3 row-span-1">
									<div className={`rank-heading ${rankCategory}`}>
										<span className="w-8 h-8 flex items-center justify-center">
											<svg viewBox="0 0 272 664" fill="none"
												xmlns="http://www.w3.org/2000/svg">
												<path d="M269.916 638.624C256.94 635.758 244.035 631.582 230.455 625.857C230.293 625.781 229.89 625.325 229.764 624.916C228.41 620.302 227.957 615.654 228.374 610.706C231.033 579.11 212.218 545.817 183.642 531.544C183.035 531.236 182.401 530.969 181.671 530.67L180.993 530.389C180.35 530.115 179.566 530.229 179.046 530.646C178.485 531.079 178.206 531.785 178.32 532.493L179.102 537.337C179.796 541.624 180.476 545.819 181.128 550.018L181.292 551.117C183.127 563.05 185.024 575.39 188.719 587.245C192.054 597.94 197.199 606.38 204.356 612.847C189.237 603.932 175.148 593.218 162.353 580.896C162.084 580.638 161.765 579.952 161.719 579.386L161.376 570.93C161.374 570.63 161.37 569.832 161.541 569.437C167.843 554.754 169.457 538.228 166.48 518.916C163.608 500.289 155.656 483.161 142.84 468.004C141.34 466.229 140.017 465.331 138.906 465.331C138.635 465.331 138.391 465.385 138.198 465.485C137.609 465.778 137.21 466.345 137.132 467.001L136.789 469.951C136.524 472.14 136.269 474.29 136.041 476.443C135.646 480.237 135.213 484.025 134.777 487.815L134.715 488.362C133.632 497.825 132.51 507.61 131.916 517.408C131.226 528.837 131.431 542.186 138.186 554.534C138.222 554.596 138.254 554.662 138.291 554.724C128.9 542.982 120.328 530.345 112.68 516.954C112.004 515.763 111.946 514.719 112.073 513.203C112.616 506.792 115.596 501.583 118.734 496.911C124.796 487.863 128.465 477.169 130.633 462.235C133.663 441.348 130.603 420.396 121.543 399.955C121.294 399.392 121.004 398.848 120.693 398.265L119.985 396.929C119.646 396.278 118.922 395.849 118.158 395.883C117.396 395.923 116.725 396.406 116.448 397.108C114.25 402.65 112.125 407.99 110.013 413.29L108.664 416.677C104.16 427.988 99.1089 441.194 96.1733 454.819C94.104 464.434 93.9776 473.714 95.7923 482.549C88.7501 465.788 82.9611 448.076 78.5276 429.71C78.4774 429.506 78.4614 428.976 78.9005 427.755C80.9739 422.081 84.7497 416.935 89.5341 413.268C100.007 405.235 105.949 394.07 110.378 384.208C119.448 364.04 121.908 342.615 117.898 318.703C117.856 318.452 117.779 318.203 117.689 317.933L117.617 317.716C117.442 317.181 117.045 316.747 116.52 316.521C116.007 316.306 115.361 316.346 114.962 316.543C114.561 316.689 113.953 316.912 113.558 317.491C111.289 320.523 108.985 323.583 106.679 326.641L106.292 327.156C100.476 334.878 94.4629 342.859 88.6839 350.81C81.9885 359.996 77.2603 368.925 74.2264 378.109C72.7626 382.544 71.8061 386.813 71.355 390.96C69.428 376.059 68.3351 360.846 68.0965 345.506C68.0404 341.845 68.5056 338.935 71.0061 335.749C73.6529 332.352 76.1253 330.455 79.5342 329.204C93.5405 324.087 102.526 313.272 108.788 304.424C118.904 290.108 124.838 273.451 126.927 253.499C127.15 251.446 127.276 249.369 127.406 247.171L127.438 246.672C127.501 245.603 127.567 244.49 127.651 243.311C127.703 242.529 127.284 241.795 126.584 241.44C125.906 241.099 125.038 241.2 124.449 241.699L122.786 243.123C122.161 243.656 121.625 244.113 121.07 244.558C118.401 246.702 115.722 248.823 113.037 250.951L112.756 251.171C106.863 255.84 100.767 260.666 94.9461 265.651C83.6509 275.284 76.378 284.873 72.0568 295.831C71.3429 297.638 70.7173 299.425 70.1799 301.193C71.9565 283.78 74.842 266.632 78.8043 249.994C79.2855 247.959 79.5542 247.362 80.5428 247.037C81.1644 246.826 81.7439 246.421 82.167 245.92C85.0405 242.653 88.8243 242.136 92.4898 242.062C104.721 241.775 114.423 235.673 122.297 229.742C141.605 215.2 154.9 178.305 154.9 177.053C154.9 176.402 154.575 175.794 154.023 175.427C153.48 175.068 152.746 175.018 152.193 175.265C148.17 176.971 144.148 178.633 139.983 180.356C130.819 184.156 121.345 188.082 112.245 192.375C103.087 196.708 95.8505 202.503 90.6771 209.634C95.6079 195.623 101.325 181.888 107.725 168.688C108.461 167.264 111.918 165.752 116.875 165.752C118.487 165.752 120.049 165.924 121.399 166.249C133.045 169.041 144.593 167.348 157.374 160.962C170.45 154.425 181.298 143.737 190.538 128.279C190.714 127.98 191.061 127.068 191.248 126.556C191.482 125.931 191.388 125.241 190.999 124.718C190.638 124.22 190.061 123.924 189.325 123.924C189.319 123.924 189.315 123.924 189.309 123.924L184.693 124.214C181.863 124.393 179.116 124.567 176.369 124.708L173.436 124.856C164.677 125.297 155.617 125.75 146.754 127.862C136.646 130.292 129.225 134.024 123.534 139.558C130.27 128.347 137.482 117.679 145.08 107.687C145.285 107.423 146.265 107.018 147.069 106.883C147.47 106.789 148.93 106.482 150.871 106.482C153.446 106.482 155.7 107.006 157.611 108.056C169.752 113.994 183.387 114.435 198.192 109.35C210.335 105.201 220.62 97.495 229.635 85.7987C229.928 85.4217 230.193 85.0107 230.433 84.5776C230.708 84.0783 230.726 83.5288 230.486 83.0275C229.788 81.5638 226.768 80.876 225.497 80.6474C222.377 80.102 218.841 79.4803 215.336 79.0051C213.73 78.7805 212.122 78.5459 210.51 78.3073L210.303 78.2752C204.841 77.4691 199.194 76.635 193.506 76.3482C183.111 75.8169 173.881 77.9384 166.327 82.6345C171.406 77.2285 176.596 72.0992 181.865 67.2807C183.532 65.7608 185.417 64.2288 187.985 62.3058C188.184 62.1534 188.689 61.975 189.309 61.9389C207.514 61.227 222.663 53.1902 235.617 37.3732C242.673 28.7629 248.083 17.9027 252.16 4.17111L252.3 3.69989C252.735 2.25615 252.976 1.46208 251.975 0.531671C251.203 -0.18619 249.844 0.026367 246.311 1.426C243.102 2.65919 239.874 3.8563 236.559 5.08548C229.9 7.55388 223.012 10.1065 216.365 12.99C205.256 17.8185 196.385 25.1375 190.003 34.7404C185.142 42.0473 183.221 49.3883 184.125 57.1444C184.119 57.2307 184.043 57.4372 184.031 57.4613C172.435 67.4732 161.35 78.7444 149.969 92.1592C157.558 80.5551 162.505 67.1945 164.988 51.7063C167.49 36.0919 167.649 22.1938 165.475 9.2202C165.337 8.40809 165.15 7.59599 164.912 6.57936L164.557 5.01329C164.396 4.34155 163.891 3.79814 163.227 3.5896C162.563 3.39309 161.82 3.56754 161.324 4.03876C160.53 4.7867 159.752 5.49254 158.992 6.17831L158.457 6.66157C156.512 8.41411 154.675 10.0684 153.013 11.9393C136.861 30.1605 127.44 49.4064 124.214 70.7778C122.744 80.4368 123.354 88.6601 126.079 95.9109C126.981 98.3132 128.389 100.459 129.79 102.588C130.432 103.561 131.074 104.537 131.661 105.54C132.094 106.26 132.131 106.446 132.129 106.412C131.862 109.27 131.479 112.454 130.962 116.276C130.939 116.324 130.867 116.436 130.637 116.741L130.45 117C121.617 129.277 113.468 142.221 106.135 155.618C109.019 145.612 111.315 132.947 111.152 118.231C110.956 100.579 106.891 84.8362 98.7219 70.096C98.3991 69.5225 97.8136 69.1496 96.9934 69.0934C96.3979 69.0934 95.8244 69.3882 95.4494 69.8915C95.2048 70.2324 94.9562 70.5532 94.7195 70.858C94.1922 71.5398 93.6989 72.1854 93.2578 72.8752C86.7529 83.0757 83.2639 94.3228 80.9478 102.983C76.7149 118.866 74.7698 132.129 74.826 144.723C74.8581 155.429 76.8091 163.659 80.9679 170.623C82.2613 172.79 83.8895 174.687 85.5257 176.596C86.394 177.609 87.2863 178.649 88.0944 179.716C88.6598 180.458 88.9326 181.214 88.9486 181.635C89.0549 184.174 88.9987 186.754 88.9446 189.249L88.9065 190.973C88.9005 191.27 88.8323 191.611 88.73 191.872C83.5085 204.523 78.9186 217.671 75.0044 231.174C75.5799 226.576 75.9048 222.124 75.987 217.781C76.4602 193.129 68.8986 171.114 53.5067 152.339L50.2984 148.431C49.9274 147.972 49.378 147.711 48.7925 147.711L48.4717 147.739C47.7859 147.854 47.2084 148.329 46.9698 148.977C46.677 149.757 46.3903 150.492 46.1115 151.204C45.5741 152.58 45.0668 153.883 44.6377 155.209C41.3351 165.554 39.7149 176.855 39.3861 191.846L39.3801 192.138C39.1334 203.045 38.7946 217.985 43.2742 232.282C47.6836 246.357 55.4598 253.469 56.9677 254.747L57.1281 254.891C61.2327 258.555 63.9057 261.905 64.4591 264.081C64.6817 264.959 64.9083 265.839 65.1729 266.71C66.344 270.582 65.6121 274.271 64.822 278.256C64.429 280.267 64.02 282.344 63.8776 284.476C63.3121 293.006 62.6183 301.68 61.9466 310.068L61.8864 310.844C61.714 312.984 61.5415 315.123 61.3711 317.263C59.6587 298.069 53.3022 280.622 42.3658 265.192C35.6685 255.751 27.6838 247.674 18.6283 241.18C18.2373 240.899 17.8262 240.648 17.2768 240.321C17.0101 240.167 16.7013 239.982 16.3263 239.748C15.7608 239.409 15.035 239.379 14.4515 239.664C13.8539 239.954 13.4428 240.546 13.3747 241.216C13.2523 242.429 13.11 243.604 12.9596 244.823C12.6568 247.319 12.3701 249.678 12.358 252.1C12.2237 277.209 17.5354 300.738 28.151 322.025C31.1086 327.965 35.0168 333.102 39.7711 337.301C44.4853 341.441 49.5725 343.884 55.3134 344.762C55.4397 344.784 55.7405 344.967 55.7866 345.003C56.0974 345.626 56.4203 346.252 56.7431 346.88C57.8901 349.095 59.0751 351.387 59.6647 353.685C60.1559 355.628 60.1559 357.752 60.1559 360.002C60.1559 360.826 60.1559 361.656 60.182 362.47C60.7334 381.92 61.4573 388.694 64.5694 406.073C62.6705 400.906 60.2863 395.724 57.2083 390.739C44.744 370.565 28.9089 356.871 8.7988 348.881C7.51948 348.365 6.23615 347.994 4.7483 347.561L4.45153 347.473C3.84796 347.297 3.20831 347.108 2.52453 346.9C1.90693 346.697 1.20311 346.835 0.699802 347.253C0.198502 347.668 -0.0641786 348.303 0.00199295 348.965C0.150378 350.345 0.252643 351.686 0.346887 352.995C0.553423 355.867 0.747927 358.578 1.44373 361.261C7.93255 386.324 18.6724 406.286 34.2748 422.289C40.9461 429.131 47.9764 433.053 55.7666 434.282C57.7317 434.589 60.1339 434.627 64.2004 434.374L65.3715 434.304C65.5499 434.294 65.7063 434.284 65.8487 434.284C66.1695 434.284 66.1956 434.284 66.4182 434.613L71.8663 442.094C71.9365 442.193 72.0387 442.548 72.1089 442.792L72.1891 443.061C77.8438 462.231 84.86 480.694 93.1334 498.218C89.4098 493.079 85.3292 488.386 80.7814 483.973C59.8672 463.68 24.1105 463.093 20.1021 463.093L19.6028 463.097L19.288 463.155C18.3054 463.504 17.7741 464.555 18.0769 465.543C18.3556 466.476 18.6163 467.418 18.915 468.525C19.4865 470.604 20.08 472.752 20.9122 474.829C24.8745 484.731 31.2971 494.256 41.1286 504.815C47.8841 512.054 55.4999 519.395 65.4036 524.037C76.2497 529.13 86.0431 530.373 95.7823 527.879C97.4386 527.444 99.3435 526.892 100.982 525.829C102.149 525.082 102.468 525.106 103.615 525.96C104.974 526.97 106.42 527.819 107.824 528.641C108.6 529.096 109.382 529.555 110.111 530.016C110.228 530.115 110.476 530.522 110.569 530.672C119.307 544.925 128.934 558.171 139.329 570.255C133.707 566.164 127.934 563.204 121.802 561.233C103.063 555.196 83.4223 555.964 63.9698 563.485C61.0663 564.61 57.8841 566.314 57.6715 566.435C57.2263 566.728 56.9195 567.201 56.8233 567.744C56.7391 568.278 56.8774 568.823 57.2023 569.24C57.8099 570.03 58.3974 570.824 58.9789 571.612L59.1072 571.785C60.4206 573.573 61.9085 575.597 63.5768 577.389C71.0903 585.444 80.3563 590.844 89.2514 595.48C101.483 601.827 113.992 605.245 126.432 605.646C127.017 605.667 127.603 605.679 128.186 605.679C139.63 605.679 148.563 601.907 155.449 594.193C155.533 594.133 155.832 594.018 155.996 594.016C158.627 594.205 161.128 594.588 162.997 594.899C163.291 594.951 163.654 595.127 163.881 595.332C175.385 605.516 187.568 614.455 200.295 622.063C198.366 621.492 196.379 620.994 194.346 620.595C180.745 617.98 166.865 619.621 151.623 625.676C141.34 629.775 131.778 635.797 122.387 644.084C121.613 644.764 121.505 645.933 122.143 646.743C125.465 650.972 129.788 653.34 133.58 655.097C142.828 659.394 153.267 662.145 165.505 663.512C165.541 663.514 169.473 663.855 174.988 663.855C178.968 663.855 182.672 663.677 185.99 663.326C189.162 662.993 192.327 662.45 195.397 661.712C209.497 658.279 219.052 651.221 224.526 640.262C224.624 640.168 225.045 639.923 225.579 639.793C228.123 639.161 230.413 638.716 232.591 638.425C233.104 638.343 233.744 638.482 234.55 638.806C244.287 642.558 254.592 645.684 265.157 648.094C265.306 648.131 265.46 648.149 265.615 648.149C266.324 648.149 266.978 647.758 267.323 647.12C268.332 645.243 269.561 643.442 270.974 641.768C271.418 641.241 271.55 640.539 271.331 639.889C271.123 639.26 270.594 638.782 269.916 638.624Z" fill="currentColor" />
											</svg>
										</span>
										<h1>Rank {userData.bestCategory.rank}</h1>
										<span className="w-8 h-8 flex items-center justify-center">
											<svg viewBox="0 0 272 664" fill="none"
												xmlns="http://www.w3.org/2000/svg">
												<path d="M271.294 347.259C270.789 346.841 270.055 346.709 269.483 346.902C268.786 347.116 268.146 347.303 267.542 347.479L267.248 347.565C265.76 348 264.474 348.373 263.201 348.885C243.085 356.877 227.248 370.571 214.784 390.745C211.706 395.73 209.321 400.912 207.423 406.079C210.537 388.698 211.259 381.926 211.81 362.478C211.836 361.662 211.836 360.832 211.836 360.008C211.836 357.758 211.836 355.632 212.327 353.693C212.917 351.395 214.102 349.103 215.249 346.886C215.572 346.258 215.895 345.63 216.161 345.079C216.253 344.971 216.552 344.788 216.668 344.77C222.421 343.892 227.509 341.45 232.225 337.305C236.977 333.108 240.885 327.971 243.843 322.031C254.458 300.744 259.77 277.215 259.636 252.106C259.624 249.684 259.339 247.326 259.026 244.761C258.884 243.612 258.74 242.437 258.619 241.22C258.551 240.552 258.14 239.958 257.544 239.67C256.957 239.385 256.247 239.405 255.654 239.764C255.295 239.988 254.988 240.171 254.709 240.333C254.17 240.654 253.759 240.905 253.37 241.186C244.314 247.676 236.327 255.757 229.628 265.198C218.696 280.628 212.337 298.075 210.625 317.269C210.454 315.129 210.282 312.99 210.109 310.85L210.049 310.074C209.378 301.686 208.684 293.012 208.118 284.482C207.976 282.322 207.561 280.221 207.16 278.188C206.386 274.279 205.654 270.588 206.825 266.72C207.092 265.845 207.316 264.965 207.541 264.087C208.094 261.911 210.767 258.561 214.872 254.897L215.026 254.759C216.54 253.475 224.316 246.361 228.728 232.289C233.205 217.991 232.867 203.053 232.62 192.144L232.614 191.854C232.285 176.859 230.665 165.56 227.36 155.211C226.933 153.887 226.426 152.582 225.888 151.21C225.61 150.496 225.325 149.759 225.032 148.987C224.792 148.333 224.214 147.858 223.538 147.745L223.207 147.715C222.622 147.715 222.075 147.978 221.704 148.431L218.493 152.343C203.101 171.116 195.54 193.133 196.013 217.785C196.095 222.126 196.42 226.58 196.996 231.178C193.083 217.677 188.496 204.535 183.278 191.892C183.17 191.615 183.099 191.272 183.091 190.981L183.055 189.253C183.001 186.758 182.945 184.178 183.051 181.639C183.067 181.218 183.34 180.462 183.908 179.718C184.714 178.653 185.608 177.613 186.534 176.53C188.112 174.693 189.743 172.796 191.034 170.631C195.193 163.665 197.146 155.435 197.178 144.73C197.234 132.127 195.291 118.864 191.056 102.989C188.742 94.3289 185.249 83.0777 178.744 72.8772C178.303 72.1915 177.81 71.5458 177.284 70.862C177.048 70.5592 176.799 70.2364 176.546 69.8895C176.178 69.3942 175.668 69.1055 174.846 69.1055C174.19 69.1536 173.605 69.5266 173.278 70.1061C165.113 84.8423 161.046 100.585 160.854 118.235C160.689 132.951 162.987 145.614 165.869 155.622C158.536 142.225 150.387 129.281 141.554 117.004L141.351 116.725C141.151 116.458 141.067 116.328 141.081 116.42C140.525 112.448 140.14 109.27 139.873 106.502C139.879 106.46 139.932 106.228 140.345 105.538C140.928 104.543 141.568 103.569 142.248 102.538C143.611 100.465 145.019 98.3192 145.921 95.917C148.644 88.6662 149.256 80.4428 147.786 70.7858C144.56 49.4124 135.137 30.1665 118.987 11.9453C117.325 10.0744 115.488 8.42013 113.545 6.6716L113.008 6.18433C112.248 5.49655 111.468 4.79273 110.68 4.0488C110.178 3.57156 109.461 3.3931 108.765 3.59763C108.107 3.80617 107.6 4.35158 107.443 5.02934L107.09 6.57736C106.85 7.60402 106.663 8.41412 106.525 9.22823C104.351 22.2019 104.51 36.0979 107.012 51.7144C109.495 67.2025 114.441 80.5612 122.031 92.1652C110.65 78.7545 99.5789 67.4933 88.0089 57.5134C87.9568 57.4452 87.8806 57.2387 87.8746 57.1866C88.779 49.3964 86.858 42.0573 81.9974 34.7504C75.6148 25.1475 66.7459 17.8285 55.6371 13C48.9898 10.1165 42.102 7.56391 35.3585 5.06343C32.1281 3.86432 28.8977 2.66922 25.5711 1.3879C22.2284 0.0584541 20.7987 -0.17816 20.0227 0.539701C19.0241 1.47011 19.2648 2.26418 19.6999 3.70792L19.8402 4.17913C23.9168 17.9107 29.3268 28.7709 36.3831 37.3792C49.3367 53.1982 64.486 61.2351 82.6732 61.9449C83.3108 61.983 83.8161 62.1594 84.0226 62.3199C86.5832 64.2368 88.4681 65.7708 90.1345 67.2908C95.4041 72.1072 100.594 77.2385 105.671 82.6426C98.1192 77.9504 88.8892 75.8329 78.4943 76.3583C72.8055 76.645 67.1589 77.4792 61.6987 78.2853L61.4902 78.3173C59.876 78.554 58.2698 78.7886 56.6677 79.0152C53.1586 79.4904 49.6214 80.112 46.4973 80.6574C45.2321 80.884 42.2103 81.5718 41.5145 83.0376C41.2738 83.5389 41.2939 84.0883 41.5666 84.5876C41.8072 85.0227 42.0719 85.4318 42.3606 85.8048C51.378 97.5051 61.6646 105.211 73.8081 109.36C88.6145 114.445 102.214 114.026 114.433 108.044C116.302 107.016 118.556 106.494 121.131 106.494C123.074 106.494 124.532 106.801 125.015 106.911C125.739 107.032 126.721 107.437 126.922 107.698C134.522 117.689 141.734 128.361 148.47 139.572C142.779 134.038 135.358 130.306 125.248 127.876C116.387 125.764 107.327 125.311 98.5683 124.87L95.6347 124.722C92.8876 124.581 90.1405 124.407 87.3112 124.228L82.5669 123.936C81.9533 123.936 81.3698 124.232 81.0128 124.726C80.6178 125.257 80.5235 125.947 80.7561 126.566C80.9466 127.084 81.2936 127.996 81.472 128.301C90.71 143.753 101.558 154.441 114.632 160.978C127.413 167.362 138.961 169.051 150.609 166.265C151.957 165.941 153.519 165.768 155.133 165.768C160.088 165.768 163.543 167.28 164.269 168.68C170.677 181.9 176.396 195.637 181.329 209.65C176.155 202.517 168.921 196.724 159.761 192.391C150.661 188.096 141.187 184.17 131.865 180.306C127.858 178.649 123.836 176.987 119.831 175.287C119.236 175.026 118.532 175.08 117.977 175.447C117.431 175.81 117.106 176.416 117.106 177.067C117.106 178.319 130.401 215.216 149.709 229.756C157.585 235.687 167.286 241.789 179.52 242.076C183.182 242.15 186.968 242.667 189.827 245.918C190.264 246.435 190.844 246.838 191.475 247.053C192.452 247.374 192.72 247.971 193.202 250.008C197.164 266.644 200.049 283.79 201.826 301.201C201.289 299.435 200.665 297.65 199.949 295.843C195.628 284.885 188.355 275.296 177.062 265.665C171.241 260.68 165.145 255.854 159.25 251.183L158.969 250.963C156.284 248.835 153.605 246.716 150.934 244.57C150.383 244.127 149.845 243.67 149.222 243.137L147.555 241.709C146.972 241.216 146.104 241.113 145.422 241.454C144.722 241.809 144.303 242.543 144.357 243.327C144.439 244.504 144.505 245.617 144.568 246.686L144.6 247.185C144.732 249.385 144.856 251.46 145.079 253.51C147.168 273.463 153.102 290.122 163.218 304.438C169.48 313.286 178.463 324.103 192.472 329.218C195.881 330.469 198.353 332.364 201.002 335.765C203.5 338.949 203.966 341.859 203.909 345.52C203.671 360.858 202.578 376.073 200.651 390.974C200.2 386.827 199.245 382.558 197.78 378.123C194.746 368.939 190.017 360.01 183.322 350.826C177.543 342.873 171.53 334.893 165.714 327.17L165.327 326.655C163.021 323.597 160.717 320.535 158.474 317.54C158.053 316.924 157.445 316.703 157.094 316.581C156.597 316.338 156.003 316.314 155.476 316.539C154.959 316.759 154.561 317.195 154.387 317.728L154.319 317.937C154.223 318.217 154.146 318.466 154.106 318.715C150.096 342.629 152.556 364.054 161.626 384.222C166.055 394.084 171.997 405.249 182.472 413.282C187.254 416.949 191.03 422.095 193.103 427.767C193.543 428.988 193.527 429.518 193.476 429.722C189.043 448.086 183.252 465.798 176.212 482.561C178.024 473.726 177.9 464.446 175.831 454.831C172.893 441.204 167.844 427.998 163.34 416.689L161.991 413.302C159.879 408.002 157.754 402.66 155.558 397.124C155.279 396.416 154.608 395.933 153.711 395.889C153.005 395.889 152.356 396.292 152.019 396.945L151.311 398.277C151 398.86 150.71 399.404 150.461 399.965C141.401 420.406 138.341 441.361 141.371 462.247C143.537 477.181 147.206 487.875 153.27 496.923C156.408 501.599 159.39 506.808 159.931 513.215C160.06 514.731 160 515.775 159.324 516.965C151.676 530.357 143.102 542.996 133.711 554.739C133.748 554.674 133.782 554.61 133.818 554.546C140.573 542.2 140.778 528.851 140.088 517.42C139.492 507.62 138.37 497.835 137.289 488.374L137.227 487.827C136.791 484.037 136.358 480.249 135.963 476.453C135.735 474.302 135.48 472.15 135.217 469.967L134.87 467.011C134.794 466.357 134.395 465.792 133.822 465.507C132.755 464.95 131.029 465.81 129.164 468.016C116.348 483.173 108.396 500.301 105.524 518.928C102.547 538.24 104.161 554.767 110.465 569.453C110.634 569.844 110.63 570.642 110.628 570.908L110.289 579.358C110.239 579.966 109.918 580.652 109.653 580.906C96.8559 593.23 82.7674 603.944 67.6482 612.861C74.8047 606.392 79.9501 597.953 83.2847 587.257C86.9803 575.402 88.8772 563.064 90.716 551.101L90.8764 550.036C91.5281 545.833 92.2078 541.639 92.9016 537.351L93.6857 532.505C93.7979 531.799 93.5192 531.093 92.9718 530.67C92.4284 530.237 91.6424 530.133 91.0167 530.401L90.333 530.684C89.6031 530.983 88.9675 531.25 88.3679 531.556C59.7858 545.831 40.971 579.126 43.6299 610.72C44.047 615.668 43.5938 620.317 42.2423 624.92C42.116 625.34 41.7109 625.795 41.5465 625.871C27.9713 631.596 15.0639 635.773 2.07621 638.64C1.40848 638.794 0.879071 639.272 0.66251 639.915C0.443943 640.563 0.576319 641.267 1.02147 641.796C2.43313 643.469 3.66229 645.267 4.67291 647.15C5.08798 647.92 6.07655 648.315 6.81646 648.123C17.3979 645.708 27.7026 642.582 37.4539 638.824C38.2419 638.508 38.8435 638.357 39.4069 638.449C41.5766 638.738 43.8685 639.183 46.4131 639.815C46.9385 639.943 47.3736 640.186 47.3817 640.164C52.9401 651.245 62.4928 658.303 76.5954 661.738C79.6633 662.474 82.8275 663.017 85.9998 663.35C89.3204 663.701 93.0239 663.879 97.0043 663.879C102.519 663.879 106.451 663.539 106.499 663.535C118.723 662.167 129.162 659.416 138.408 655.123C142.201 653.364 146.525 650.996 149.847 646.767C150.483 645.957 150.377 644.788 149.605 644.108C140.212 635.821 130.65 629.799 120.365 625.7C105.127 619.645 91.2474 618.005 77.6421 620.621C75.6088 621.016 73.6237 621.514 71.6947 622.085C84.4217 614.477 96.6073 605.536 108.115 595.35C108.336 595.149 108.699 594.973 108.981 594.923C110.864 594.61 113.365 594.225 115.923 594.04C116.16 594.04 116.461 594.155 116.495 594.167C123.429 601.927 132.362 605.699 143.806 605.699C144.389 605.699 144.975 605.687 145.558 605.667C158 605.265 170.509 601.847 182.743 595.5C191.634 590.862 200.902 585.462 208.417 577.409C210.083 575.619 211.571 573.593 212.885 571.807L213.013 571.632C213.595 570.844 214.182 570.05 214.786 569.266C215.114 568.843 215.253 568.298 215.167 567.748C215.074 567.219 214.768 566.748 214.244 566.407C214.112 566.335 210.93 564.628 208.024 563.503C188.57 555.986 168.929 555.216 150.192 561.253C144.058 563.224 138.285 566.184 132.665 570.275C143.06 558.191 152.685 544.945 161.423 530.692C161.518 530.542 161.766 530.135 161.846 530.061C162.61 529.573 163.392 529.112 164.172 528.657C165.57 527.837 167.018 526.989 168.377 525.978C169.524 525.122 169.847 525.1 171.006 525.846C172.646 526.91 174.553 527.464 176.216 527.899C185.941 530.389 195.744 529.148 206.588 524.057C216.494 519.413 224.11 512.072 230.867 504.833C240.697 494.274 247.119 484.747 251.082 474.849C251.914 472.772 252.507 470.624 253.125 468.379C253.38 467.436 253.64 466.494 253.917 465.567C254.22 464.573 253.691 463.52 252.708 463.173L251.894 463.111C247.885 463.111 212.129 463.698 191.215 483.991C186.665 488.406 182.586 493.099 178.863 498.236C187.136 480.715 194.152 462.249 199.807 443.081L199.889 442.8C199.957 442.566 200.059 442.211 200.128 442.114L205.598 434.603C205.802 434.302 205.826 434.302 206.147 434.302C206.29 434.302 206.446 434.312 206.624 434.322L207.793 434.392C211.864 434.645 214.26 434.609 216.231 434.3C224.02 433.071 231.05 429.149 237.721 422.307C253.324 406.306 264.063 386.342 270.552 361.281C271.248 358.596 271.443 355.885 271.651 353.009C271.743 351.706 271.846 350.363 271.994 348.975C272.056 348.309 271.795 347.674 271.294 347.259Z" fill="currentColor" />
											</svg>
										</span>
									</div>
									<div className="rank-details">
										<div className="details">
											<h2>Time Limit</h2>
											<p>{userData.bestCategory.details.timeLimit}s</p>
										</div>
										<div className="details">
											<h2>Device Type</h2>
											<p>{userData.bestCategory.details.device}</p>
										</div>
										<div className="details">
											<h2>At</h2>
											<p>{formatDate(userData.bestCategory.details.updatedAt).split(',')[0]}</p>
										</div>
									</div>
								</div>
							)}
							<div className="bento wpm">
								<div className="inner-stat">
									<p>{userData.bestCategory.details.wpm}</p>
									<h2>WPM</h2>
								</div>
							</div>
							<div className="bento acc">
								<div className="inner-stat">
									<p className='flex gap-0 items-center justify-center'>{userData.bestCategory.details.acc} <span className='text-6xl'>%</span></p>
									<h2>Accuracy</h2>
								</div>
							</div>
							<div className="bento ctyped">
								<div className="inner-stat">
									<p>{userData.bestCategory.details.charTyped}</p>
									<h2>Characters <br /> Typed</h2>
								</div>
							</div>
						</div>
					</div>
					<BackgroundBeams />
				</div>
			) : (
				<div className="fixed inset-0 bg-black bg-opacity-60 flex justify-center items-center z-50">
					<div className="w-12 h-12 sm:w-16 sm:h-16 border-4 border-white border-t-transparent rounded-full animate-spin"></div>
				</div>
			)}
		</div>
	);

}
